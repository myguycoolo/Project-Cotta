"use strict";
/* eslint-disable @typescript-eslint/no-non-null-assertion */
Object.defineProperty(exports, "__esModule", { value: true });
exports.chain = void 0;
const undertaker_1 = require("./undertaker");
let counter = 0;
// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types
function chain(subjectTaskName) {
    return {
        before: function runBefore(taskName) {
            const id = `${taskName}_before_${counter++}?`;
            const subject = undertaker_1.undertaker.task(subjectTaskName);
            undertaker_1.undertaker.task(id, undertaker_1.undertaker.task(taskName));
            undertaker_1.undertaker.task(taskName, undertaker_1.series(subject, id));
        },
        after: function runAfter(taskName) {
            const id = `${taskName}_after_${counter++}?`;
            const subject = undertaker_1.undertaker.task(subjectTaskName);
            undertaker_1.undertaker.task(id, undertaker_1.undertaker.task(taskName));
            undertaker_1.undertaker.task(taskName, undertaker_1.series(id, subject));
        },
    };
}
exports.chain = chain;
